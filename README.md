# ? Embedded Vital Signs Monitoring System

**ECG ・ RESP ・ SpO?**

基于 **STM32F103RCT6 (Cortex-M3/M4)** 的嵌入式生命体征监测示例工程，实现 **心电（ECG）**、**呼吸（RESP）** 与 **血氧饱和度（SpO?）/脉率** 的完整采集、数字滤波与参数计算流程。

本项目定位为 **学习型 / 教学型 / 原理验证型** 工程，重点展示 **多生理信号并行采集 + 数字信号处理 + 嵌入式实现细节**，适合生物医学工程与嵌入式系统方向学习和二次开发。

---

## ? 功能特性

### ?? ECG（心电）

* 导联脱落检测
* 50 Hz 工频陷波滤波
* 高通 + 低通 IIR 滤波
* 滑动均值平滑
* R 波检测
* 心率（BPM）计算
* OLED 显示 / 串口波形输出

---

### ? RESP（呼吸）

* 基于模拟呼吸传感器的 ADC 采样
* 呼吸信号数字滤波（低频增强）
* 呼吸波形提取与平滑处理
* 呼吸周期检测
* 呼吸频率（Breaths Per Minute, BPM）计算
* OLED 实时显示 / 串口输出

---

### ? SpO?（血氧 & 脉率）

* 红光 / 红外 LED 交替驱动（状态机控制）
* ADC 同步采样
* 高通 + 低通 IIR 滤波
* 峰峰值分析（AC 分量）
* R 值计算（AC_RED / AC_IR）
* 血氧饱和度经验公式映射
* 脉率检测与滑动平均
* **DAC 自动调整红光/红外光光强 以适配不同人群**
* OLED / 串口输出

---

## ? 代码结构说明

├── ECG.c / ECG.h        # 心电采集与心率算法
├── SPO2.c / SPO2.h      # 血氧与脉率算法
├── ADC.c                # ADC 驱动
├── DAC.c                # DAC 驱动（调光）
├── OLED.c               # OLED 显示
├── Timer.c / SysTick.c  # 时间基准
├── Wave.h               # 波形显示/模式定义
└── UART1.c              # 串口输出

--- 

## ? 系统架构概览

```
传感器信号
   │
   
ADC 采样
   │
   
数字滤波
(IIR / 平滑)
   │
   ├── ECG  → R 波检测 → 心率
   ├── RESP → 周期检测 → 呼吸率
   └── SpO? → 峰峰值 → R 值 → 血氧
   │
   
OLED 显示 / 串口输出
```

---

## ? 任务调度与时序

| 模块            | 周期     | 说明            |
| ------------- | ------ | ------------- |
| ECGTask       | 固定采样周期 | 心电采集与处理       |
| RESPTask      | 固定采样周期 | 呼吸信号处理        |
| SPO2_LED_Task | 1 ms   | 红光 / 红外灯驱动与采样 |
| SPO2Task      | 8 ms   | 血氧 & 脉率计算     |
| OLED_Task     | 1 s    | 显示刷新          |

---

## ? 输出信息

* **ECG**：心率（BPM）、心电波形
* **RESP**：呼吸频率（RPM）、呼吸波形
* **SpO?**：血氧饱和度（%）、脉率

支持 **OLED 实时显示** 与 **串口调试/上位机绘图**。

---

## ?? 重要声明

Disclaimer / 免责声明

本项目仅用于：

- 学习与教学
- 算法验证
- 工程原理研究

? 不用于任何医疗诊断或临床用途
? 不符合医疗器械法规与安全认证要求

---

## ? 适合人群

* 生物医学工程专业学生
* 医疗电子 / 嵌入式系统学习者
* 想理解 **ECG / RESP / SpO? 全流程算法** 的开发者

---

## ? License

本项目遵循 MIT License。

--- 
